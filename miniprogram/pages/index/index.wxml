<navigation-bar
  title="温州医学院附属第一医院戒烟门诊登记表"
  back="{{true}}"
  color="black"
  background="transparent"
></navigation-bar>

<view class="page">
  <form class="form" bindsubmit="formSubmit">

    <view class="card">
      <view class="section-header">
        <text class="section-title">个人信息</text>
        <text class="section-tip">必填</text>
      </view>

      <view class="field required">
        <text class="field-label">姓名</text>
        <view class="field-content">
          <input
            class="field-input"
            name="vin"
            maxlength="17"
            placeholder="请输入真实姓名"
            placeholder-class="placeholder-text"
          />
        </view>
      </view>

      <view class="field required">
        <text class="field-label">性别</text>
        <view class="field-content">
          <view 
            class="gender-slider-container"
            bindtouchstart="onGenderTouchStart"
            bindtouchmove="onGenderTouchMove"
            bindtouchend="onGenderTouchEnd"
          >
            <view class="gender-slider-track">
              <view 
                class="gender-slider-indicator {{gender === '女' ? 'right' : 'left'}}"
              ></view>
            </view>
            <view class="gender-options">
              <view 
                class="gender-option {{gender === '男' ? 'active' : ''}}"
                data-value="男"
                bindtap="onGenderSelect"
              >
                <text>男</text>
              </view>
              <view 
                class="gender-option {{gender === '女' ? 'active' : ''}}"
                data-value="女"
                bindtap="onGenderSelect"
              >
                <text>女</text>
              </view>
            </view>
          </view>
        </view>
      </view>

      <view class="field required">
        <text class="field-label">年龄</text>
        <view class="field-content">
          <input
            type="number"
            class="field-input"
            name="age"
            minlength="1"
            maxlength="3"
            bindinput="onInputAge"
            bindblur="onBlurAge"
            value="{{age}}"
            placeholder="请输入真实年龄"
            placeholder-class="placeholder-text"
          />
        </view>
      </view>

      <view class="field required">
        <text class="field-label">体重</text>
        <view class="field-content">
          <view class="weight-input-group">
            <input
              type="number"
              class="weight-input weight-integer"
              name="weightInteger"
              value="{{weightInteger}}"
              placeholder="65"
              placeholder-class="placeholder-text"
              bindinput="onWeightIntegerInput"
              maxlength="3"
            />
            <text class="weight-dot">.</text>
            <input
              type="number"
              class="weight-input weight-decimal"
              name="weightDecimal"
              value="{{weightDecimal}}"
              placeholder="5"
              placeholder-class="placeholder-text"
              bindinput="onWeightDecimalInput"
              maxlength="1"
            />
            <text class="weight-unit">kg</text>
          </view>
        </view>
      </view>

      <view class="field required">
        <text class="field-label">身高</text>
        <view class="field-content">
          <view class="height-input-group">
            <input
              type="number"
              class="field-input height-input"
              name="height"
              value="{{height}}"
              placeholder="例如，170"
              placeholder-class="placeholder-text"
              bindinput="onHeightInput"
              maxlength="3"
            />
            <text class="height-unit">cm</text>
          </view>
        </view>
      </view>
    </view>

    <view class="card">
      <view class="section-header">
        <text class="section-title">文化程度</text>
        <text class="section-tip">必选</text>
      </view>

      <view class="field">
          <radio-group name="education" class="education-radio-group">
            <label class="education-radio-label"><radio value="1"/>小学以下或小学</label>
            <label class="education-radio-label"><radio value="2"/>初中</label>
            <label class="education-radio-label"><radio value="3"/>高中</label>
            <label class="education-radio-label" ><radio value="4"/>大学或大学以上</label>
          </radio-group>
      </view>
    </view>

    <view class="card">
      <view class="section-header">
        <text class="section-title">吸烟信息</text>
        <text class="section-tip">必填</text>
      </view>

      <view class="field required">
        <text class="field-label">开始吸烟的年龄</text>
        <view class="field-content">
          <view class="smoke-age-input-group">
            <input
              type="number"
              class="field-input smoke-input"
              name="smokeStartAge"
              value="{{smokeStartAge}}"
              placeholder="例如，16"
              placeholder-class="placeholder-text"
              maxlength="3"
              minlength="1"
              bindinput="onInputSmokeStartAge"
              bindblur="onBlurSmokeStartAge"
            />
            <text class="height-unit">岁</text>
          </view>
        </view>
      </view>

      <view class="field required">
        <text class="field-label">吸烟年限</text>
        <view class="field-content">
          <view class="smoke-age-input-group">
            <input
              type="number"
              class="field-input smoke-input"
              name="smokePeriod"
              value="{{smokePeriod}}"
              placeholder="例如，10"
              placeholder-class="placeholder-text"
              bindinput="onInputSmokePeriod"
              maxlength="3"
              minlength="1"
              bindblur="onBlurSmokePeriod"
            />
            <text class="height-unit">年</text>
          </view>
        </view>
      </view>
    </view>

    <view class="submit-wrapper">
      <button form-type="submit" type="primary">确认添加</button>
    </view>
  </form>
</view>

