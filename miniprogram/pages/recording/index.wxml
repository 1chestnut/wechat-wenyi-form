<!-- index.wxml -->
<view class="container">
  <view class="recorder-container">
    <!-- 顶部标题区域 -->
    <view class="header">
      <text class="title">语音录制</text>
      <text class="subtitle">长按录制，松开结束</text>
    </view>
    
    <!-- 波形显示区域 -->
    <view class="wave-container" wx:if="{{recorderReady}}" style="width: 608rpx; height: 381rpx; display: flex; box-sizing: border-box">
      <view class="wave-bars">
        <view 
          class="wave-bar {{isRecording ? 'active' : ''}}" 
          wx:for="{{waveBars}}" 
          wx:key="index"
          style="height: {{isRecording ? item.height : '20rpx'}}; animation-delay: {{item.delay}}ms;"
        ></view>
      </view>
      <view class="time-display">
        <text class="time-text">{{formatTime(recordingDuration)}}</text>
      </view>
    </view>
    
    <!-- 录音按钮 -->
    <view class="record-section">
      <view 
        class="record-btn-outer {{isRecording ? 'pulsating' : ''}}"
        bindtouchstart="startRecord"
        bindtouchend="stopRecord"
        bindtouchcancel="stopRecord"
      >
        <view class="record-btn-inner {{isRecording ? 'recording' : ''}}">
          <view class="record-icon">
            <view class="mic-icon {{isRecording ? 'active' : ''}}"></view>
          </view>
        </view>
      </view>
      <text class="record-hint">{{isRecording ? '松开结束' : '按住录音'}}</text>
    </view>
    
    <!-- 状态显示 -->
    <view class="status-area">
      <text class="status-text {{isRecording ? 'recording' : ''}}">{{statusText}}</text>
    </view>
    
    <!-- 文件操作区域 -->
    <view class="action-buttons" wx:if="{{audioSavedPath && !isRecording}}">
      <view class="action-row">
        <view class="action-btn play" bindtap="playSavedAudio">
          <text>播放</text>
        </view>
        <view class="action-btn info" bindtap="getFileDetails">
          <text>详情</text>
        </view>
        <view class="action-btn list" bindtap="viewAllSavedFiles">
          <text>列表</text>
        </view>
      </view>
    </view>
  </view>
</view>